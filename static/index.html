<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="manifest" href="./manifest.json" />
    <meta
      name="theme-color"
      media="(prefers-color-scheme: dark)"
      content="black"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Timeyâ€“wimey, wibblyâ€“wobbly</title>
    <link rel="stylesheet" href="./stylesheet/index.css" />
    <link rel="icon" type="image/png" href="./media/icons/icon-32.png" />
    <link rel="apple-touch-icon" href="./media/icons/icon-apple-512.png" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <script type="importmap">
      {
        "imports": {
          "lit": "https://cdn.jsdelivr.net/gh/lit/dist@2/all/lit-all.min.js"
        }
      }
    </script>
    <service-worker href="/serviceWorker.mjs"></service-worker>
  </head>
  <body class="t-main" data-authorized="undefined">
    <script
      type="module"
      src="./scripts/index.mjs"
      onerror="document.body.textContent = 'Some sort of failure happened ðŸ¤·'"
    >
    </script>
    <!-- TODO: handle properties -->
    <tw-login-form></tw-login-form>
    <aside
      class="m-pageMessage u-authorized"
      id="loading-message"
      -hidden
      aria-live="polite"
    >
      <p class="m-pageMessage__content">Loadingâ€¦</p>
    </aside>

    <form
      class="o-form m-loader__wrapper u-authorized"
      id="current"
      method="POST"
    >
      <p class="m-formElement">
        <label class="m-formElement__label" for="current_task"> Task </label>
        <input
          id="current_task"
          class="m-formElement__input a-input a-input--text"
          name="task"
          type="text"
          required
          list="current_task__list"
        />
        <datalist id="current_task__list" name="task__list"> </datalist>
      </p>
      <p class="m-formElement">
        <label class="m-formElement__label" for="current_project">
          Project
        </label>
        <select
          id="current_project"
          class="m-formElement__input a-input a-input--select"
          name="project"
          required
        ></select>
      </p>
      <!-- TODO Add required attribute, when implemented -->
      <p class="u-v3 m-formElement">
        <label class="m-formElement__label" for="current_start-time">
          Start time
        </label>
        <input
          id="current_start-time"
          class="m-formElement__input a-input a-input--date"
          name="start-time"
          type="datetime-local"
        />
      </p>
      <dl class="m-timer">
        <dt
          class="m-timer__label m-timer__label--day"
          aria-label="Current task running for"
        >
          Current
        </dt>
        <dd class="m-timer__value timer__value--day">
          <time
            is="tw-duration"
            class="a-duration"
            name="duration"
            precision="s"
          >
          </time>
        </dd>
      </dl>
      <div class="m-actions">
        <button
          class="a-button a-button--primary m-actions__action m-actions__action--primary"
          type="submit"
          name="start"
        >
          Start new
        </button>
        <button class="a-button m-actions__action" type="button" name="stop">
          Stop
        </button>
        <button
          class="u-v3 a-button m-actions__action"
          type="button"
          name="split"
        >
          Split
        </button>
        <button class="a-button m-actions__action" type="button" name="change">
          Change
        </button>
      </div>

      <div hidden data-loader class="m-loader__animation" aria-live="polite">
        Things are happeningâ€¦
      </div>
    </form>

    <article class="u-authorized">
      <tw-history />
    </article>
  </body>
</html>
